<!DOCTYPE html>

<html>
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>架构 | 首页</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen+Mono|Oxygen:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/flyer-job/normalize.min.css">


<link rel="stylesheet" href="/flyer-job/book.min.c8c8e50ed288f167b51b63d6da0960cfaa3aa1b351c38bea4fd536d969bc1aec.css">
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main>

    <aside class="menu fixed">
      <nav role="navigation">
        <h2 class="brand">
  <a href="https://vancefantasy.github.io/flyer-job/">首页</a>
</h2>
        
        
        
          <ul>
<li><a href="/flyer-job/docs/introducing">向你介绍</a></li>
<li><a href="/flyer-job/docs/deployguide">部署指南</a></li>
<li><a href="/flyer-job/docs/firstjob">接入一个任务</a></li>
<li><a href="/flyer-job/docs/design">设计</a>

<ul>
<li><a href="/flyer-job/docs/architecture">架构</a></li>
<li><a href="/flyer-job/docs/communicationprotocol">通信协议</a></li>
</ul></li>
<li><a href="/flyer-job/docs/faq">FAQ</a></li>
</ul>

        
      
        
      </nav>
    </aside>

    <div class="content">
      <header>
        <label for="menu-control">
  <img src="https://vancefantasy.github.io/flyer-job//svg/menu.svg" />
</label>
<strong>架构</strong>
      </header>
      <article class="markdown">

<h2 id="架构图">架构图</h2>

<p><img src="../../imgs/flyerjob_architecture.png" alt="arch" /></p>

<h2 id="说明">说明</h2>

<ol>
<li>尽可能的轻量级，不依赖第三方有状态存储的组件(只依赖MySQL做任务持久化)</li>
<li>由quartz cluster保证任务高可用。</li>
<li>每一个job client都会和每一个server node建立socket通道。</li>
<li>server node可以扩容，心跳协议检测到版本号变化后会重建连接。</li>
<li>如果任务数量较大，可建立多个scheduler，然后对任务进行sharding。这也来自quartz官方的建议。</li>
</ol>
</article>
    </div>

    
    
    <aside class="toc fixed">
      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#架构图">架构图</a></li>
<li><a href="#说明">说明</a></li>
</ul></li>
</ul>
</nav>
    </aside>
    

  </main>
  
</body>
</html>